<!DOCTYPE html>
<html>
<head>
<title>pyecharts动态图表.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="pyecharts-%E5%8A%A8%E6%80%81%E5%9B%BE%E8%A1%A8">pyecharts 动态图表</h1>
<h2 id="1-pyecharts%E7%AE%80%E4%BB%8B">1. pyecharts简介</h2>
<p>pyecharts是基于百度开源图表组件echarts的python封装。支持所有常用的图表组件，和matlibplot系的图表库不同的是：pyecharts支持动态交互展示，这一点在查看复杂数据图表时特别的有用。</p>
<pre class="hljs"><code><div>pip install pyecharts
</div></code></pre>
<h2 id="2pyecharts%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8">2.pyecharts简单使用</h2>
<p>pyecharts支持常用的基本图形展示，条形图、折线图、饼图、散点图、热力图、漏斗图、雷达图、箱型图、地图等，还能支持仪表盘，树形图的展示。</p>
<pre class="hljs"><code><div>
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Bar,Line
<span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.globals <span class="hljs-keyword">import</span> ThemeType

line = (
    Line(init_opts=opts.InitOpts(theme=ThemeType.LIGHT, width=<span class="hljs-string">'1000px'</span>,height=<span class="hljs-string">'300px'</span> ))
    .add_xaxis([<span class="hljs-string">"衬衫"</span>, <span class="hljs-string">"羊毛衫"</span>, <span class="hljs-string">"雪纺衫"</span>, <span class="hljs-string">"裤子"</span>, <span class="hljs-string">"高跟鞋"</span>, <span class="hljs-string">"袜子"</span>])
    .add_yaxis(<span class="hljs-string">"商家A"</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">20</span>, <span class="hljs-number">36</span>, <span class="hljs-number">10</span>, <span class="hljs-number">75</span>, <span class="hljs-number">90</span>])
    .add_yaxis(<span class="hljs-string">"商家B"</span>, [<span class="hljs-number">15</span>, <span class="hljs-number">6</span>, <span class="hljs-number">45</span>, <span class="hljs-number">20</span>, <span class="hljs-number">35</span>, <span class="hljs-number">66</span>])
    .set_global_opts(title_opts=opts.TitleOpts(title=<span class="hljs-string">"主标题"</span>, subtitle=<span class="hljs-string">"副标题"</span>),
                        datazoom_opts=opts.DataZoomOpts(is_show=<span class="hljs-literal">True</span>))
    .set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="hljs-literal">True</span>))
)
line.render(<span class="hljs-string">'test.html'</span>)
line.render_notebook()
</div></code></pre>
<p><img src="img/md-2021-03-25-19-32-43.png" alt=""></p>
<p>从上面简单事例可知，pyecharts的使用包括:</p>
<ul>
<li>图标类型（Line）本身的初始化配置，如主题，大小</li>
<li>加载数据：如加载x轴数据，加载y轴数据（可以多个）</li>
<li>设置全局配置，如标题，区域缩放datazoom，工具箱等</li>
<li>设置系列配置项，如标签，线条，刻度文本展示等</li>
<li>图标显示：<code>render</code>保存成html文件，如果是jupyter notebook则直接通过<code>render_notebook</code>展示在notebook中</li>
</ul>
<h2 id="3%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8">3.常用配置使用</h2>
<p>在pyecharts中，关于图表外观显示等操作都是在相应的option里配置，包括坐标轴，图例，数据标签，网格线，图表样式/颜色，不同系列等等。</p>
<p><img src="img/md-2021-03-25-19-44-37.png" alt=""></p>
<ul>
<li>InitOpts： 各个图表类型初始配置</li>
<li>set_global_opts： 全局外观配置</li>
<li>set_series_opts： 系列配置</li>
</ul>
<p>为了方便大家和自己，下面给出一个常用的组合，通常可视化足够用了，快收藏。</p>
<ul>
<li>InitOpts：主题，长宽，动画效果</li>
<li>DataZoomOpts： 区域收缩，这个对于数据特别多，如一天的时间序列数据，特别有用，可以拖动查看全局和局部的数据（可以设置是否显式显式还是可拖动type_=&quot;inside&quot;）</li>
<li>标题配置TitleOpts： 说明这个图表说明的是什么，必备的吧</li>
<li>图例配置LegendOpts：说明图表中的不同数据项（这个图例是可以点击的，可以单独查看某个图例的数据，很有用）</li>
<li>提示框配置TooltipOpts：显示图例具体某个点的数据</li>
<li>x轴和y轴坐标轴标题说明AxisOpts</li>
<li>坐标刻度调整： 特别适用于刻度说明比较多，可以显示角度变换等</li>
<li>markpoint/markline: 对图表的特别标记，用于重点说明部分和标注区分线</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Bar,Line
<span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.globals <span class="hljs-keyword">import</span> ThemeType

bar = (
    Bar(init_opts=opts.InitOpts(theme=ThemeType.LIGHT, 
                                 width=<span class="hljs-string">'1000px'</span>,
                                 height=<span class="hljs-string">'300px'</span>, 
                                 animation_opts=opts.AnimationOpts(animation_delay=<span class="hljs-number">1000</span>, animation_easing=<span class="hljs-string">"elasticOut"</span>)
                                )
        )
    .add_xaxis([<span class="hljs-string">"衬衫"</span>, <span class="hljs-string">"羊毛衫"</span>, <span class="hljs-string">"雪纺衫"</span>, <span class="hljs-string">"裤子"</span>, <span class="hljs-string">"高跟鞋"</span>, <span class="hljs-string">"袜子"</span>])
    .add_yaxis(<span class="hljs-string">"商家A"</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">20</span>, <span class="hljs-number">36</span>, <span class="hljs-number">10</span>, <span class="hljs-number">75</span>, <span class="hljs-number">90</span>])
    .add_yaxis(<span class="hljs-string">"商家B"</span>, [<span class="hljs-number">15</span>, <span class="hljs-number">6</span>, <span class="hljs-number">45</span>, <span class="hljs-number">20</span>, <span class="hljs-number">35</span>, <span class="hljs-number">66</span>])
    .set_global_opts(title_opts=opts.TitleOpts(title=<span class="hljs-string">"主标题"</span>, subtitle=<span class="hljs-string">"副标题"</span>),
                     toolbox_opts=opts.ToolboxOpts(is_show=<span class="hljs-literal">False</span>),
                     <span class="hljs-comment"># datazoom_opts=opts.DataZoomOpts(is_show=True)</span>
                     datazoom_opts=[opts.DataZoomOpts(), opts.DataZoomOpts(type_=<span class="hljs-string">"inside"</span>)],
                     legend_opts=opts.LegendOpts(type_=<span class="hljs-string">"scroll"</span>, pos_left=<span class="hljs-string">"50%"</span>, orient=<span class="hljs-string">"vertical"</span>),
                     xaxis_opts=opts.AxisOpts(axislabel_opts=opts.LabelOpts(rotate=<span class="hljs-number">-15</span>), name=<span class="hljs-string">"我是 X 轴"</span>),
                     yaxis_opts=opts.AxisOpts(name=<span class="hljs-string">"我是 Y 轴"</span>, axislabel_opts=opts.LabelOpts(formatter=<span class="hljs-string">"{value} /月"</span>)),
                     tooltip_opts=opts.TooltipOpts(trigger=<span class="hljs-string">"axis"</span>, axis_pointer_type=<span class="hljs-string">"cross"</span>),

                    )
    .set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="hljs-literal">False</span>),
                    markpoint_opts=opts.MarkPointOpts(
                        data=[
                            opts.MarkPointItem(type_=<span class="hljs-string">"max"</span>, name=<span class="hljs-string">"最大值"</span>),
                            opts.MarkPointItem(type_=<span class="hljs-string">"min"</span>, name=<span class="hljs-string">"最小值"</span>),
                            opts.MarkPointItem(type_=<span class="hljs-string">"average"</span>, name=<span class="hljs-string">"平均值"</span>),
                        ]
                        ),
                    )
)
<span class="hljs-comment"># line.render('test.html')</span>
bar.render_notebook()
</div></code></pre>
<p><img src="img/md-2021-03-30-10-21-14.png" alt=""></p>
<h2 id="4%E5%B8%B8%E7%94%A8%E7%BB%84%E5%90%88%E5%9B%BE%E8%A1%A8%E4%BD%BF%E7%94%A8">4.常用组合图表使用</h2>
<p>常用组合图表有：</p>
<ul>
<li>
<p>不同图表类型组合如柱状图和折线图组合在一张图中（双y轴），主要的看同一视角不同指标的差异和关联；pyecharts中是通过overlap实现</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Bar, Line
<span class="hljs-keyword">from</span> pyecharts.faker <span class="hljs-keyword">import</span> Faker

v1 = [<span class="hljs-number">2.0</span>, <span class="hljs-number">4.9</span>, <span class="hljs-number">7.0</span>, <span class="hljs-number">23.2</span>, <span class="hljs-number">25.6</span>, <span class="hljs-number">76.7</span>, <span class="hljs-number">135.6</span>, <span class="hljs-number">162.2</span>, <span class="hljs-number">32.6</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">6.4</span>, <span class="hljs-number">3.3</span>]
v2 = [<span class="hljs-number">2.6</span>, <span class="hljs-number">5.9</span>, <span class="hljs-number">9.0</span>, <span class="hljs-number">26.4</span>, <span class="hljs-number">28.7</span>, <span class="hljs-number">70.7</span>, <span class="hljs-number">175.6</span>, <span class="hljs-number">182.2</span>, <span class="hljs-number">48.7</span>, <span class="hljs-number">18.8</span>, <span class="hljs-number">6.0</span>, <span class="hljs-number">2.3</span>]
v3 = [<span class="hljs-number">2.0</span>, <span class="hljs-number">2.2</span>, <span class="hljs-number">3.3</span>, <span class="hljs-number">4.5</span>, <span class="hljs-number">6.3</span>, <span class="hljs-number">10.2</span>, <span class="hljs-number">20.3</span>, <span class="hljs-number">23.4</span>, <span class="hljs-number">23.0</span>, <span class="hljs-number">16.5</span>, <span class="hljs-number">12.0</span>, <span class="hljs-number">6.2</span>]


bar = (
    Bar(init_opts=opts.InitOpts(width=<span class="hljs-string">"680px"</span>, height=<span class="hljs-string">"300px"</span>))
    .add_xaxis(Faker.months)
    .add_yaxis(<span class="hljs-string">"蒸发量"</span>, v1)
    .add_yaxis(<span class="hljs-string">"降水量"</span>, v2)
    .extend_axis(
        yaxis=opts.AxisOpts(
            axislabel_opts=opts.LabelOpts(formatter=<span class="hljs-string">"{value} °C"</span>), interval=<span class="hljs-number">5</span>
        )
    )
    .set_series_opts(label_opts=opts.LabelOpts(is_show=<span class="hljs-literal">False</span>))
    .set_global_opts(
        title_opts=opts.TitleOpts(title=<span class="hljs-string">"Overlap-bar+line"</span>),
        yaxis_opts=opts.AxisOpts(axislabel_opts=opts.LabelOpts(formatter=<span class="hljs-string">"{value} ml"</span>)),
        tooltip_opts=opts.TooltipOpts(trigger=<span class="hljs-string">"axis"</span>, axis_pointer_type=<span class="hljs-string">"cross"</span>),
    )
)

line = Line().add_xaxis(Faker.months).add_yaxis(<span class="hljs-string">"平均温度"</span>, v3, yaxis_index=<span class="hljs-number">1</span>)
bar.overlap(line)
bar.render_notebook()
</div></code></pre>
<p>从实现上，</p>
<ul>
<li><code>.extend_axis</code>增加一个纵坐标</li>
<li>增加的折线图设置轴坐标时设置<code>yaxis_index</code>索引和前面的纵坐标对应</li>
<li>然后两张叠加overlap <code>bar.overlap(line)</code></li>
</ul>
<p><img src="img/md-2021-03-30-10-13-15.png" alt=""></p>
</li>
<li>
<p>多图标以网格（GRID）方式组合，主要是对比；pyecharts中是通过grid组件实现</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Bar, Grid, Line
<span class="hljs-keyword">from</span> pyecharts.faker <span class="hljs-keyword">import</span> Faker

bar = (
    Bar()
    .add_xaxis(Faker.choose())
    .add_yaxis(<span class="hljs-string">"商家A"</span>, Faker.values())
    .add_yaxis(<span class="hljs-string">"商家B"</span>, Faker.values())
    .set_global_opts(title_opts=opts.TitleOpts(title=<span class="hljs-string">"Grid-Bar"</span>))
)
line = (
    Line()
    .add_xaxis(Faker.choose())
    .add_yaxis(<span class="hljs-string">"商家A"</span>, Faker.values())
    .add_yaxis(<span class="hljs-string">"商家B"</span>, Faker.values())
    .set_global_opts(
        title_opts=opts.TitleOpts(title=<span class="hljs-string">"Grid-Line"</span>, pos_top=<span class="hljs-string">"48%"</span>),
        legend_opts=opts.LegendOpts(pos_top=<span class="hljs-string">"48%"</span>),
    )
)

grid = (
    Grid(init_opts=opts.InitOpts(width=<span class="hljs-string">"680px"</span>, height=<span class="hljs-string">"500px"</span>))
    .add(bar, grid_opts=opts.GridOpts(pos_bottom=<span class="hljs-string">"60%"</span>))
    .add(line, grid_opts=opts.GridOpts(pos_top=<span class="hljs-string">"60%"</span>))
)
grid.render_notebook()
</div></code></pre>
<p>从实现看</p>
<ul>
<li>主要通过<code>Grid</code>把各种图形放入其中</li>
<li>各个图表的位置通过<code>GridOpts</code>来设置，上下左右的位置</li>
<li>需要注意的是:grid中图表的title和图例需要根据所处位置来指定相对的位置（这个有点麻烦，多调调）</li>
</ul>
<p><img src="img/md-2021-03-30-10-31-32.png" alt=""></p>
</li>
</ul>
<h2 id="5%E5%9C%B0%E5%9B%BE%E4%BD%BF%E7%94%A8">5.地图使用</h2>
<p>地图可用在展示数据在地理位置上的分布情况，也是很常见的可视化的展示组件。pyecharts中是通过<code>Map</code>类来实现的。具体细节需要注意：</p>
<ul>
<li>map支持不同的maptype，如中国地图china(省级) china-cities（市级），世界地图world，还有中国各省市地图以及世界各国国家地图，参看github <code>pyecharts/datasets/map_filename.json</code></li>
<li>map的数据格式是（地理位置， value）， 如<code>[['广东', 76],['北京', 58]]</code></li>
<li>可以通过<code>visualmap_opts</code>查看着重点</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Map
<span class="hljs-keyword">from</span> pyecharts.faker <span class="hljs-keyword">import</span> Faker

c1 = (
    Map()
    .add(<span class="hljs-string">"商家A"</span>, [list(z) <span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> zip(Faker.guangdong_city, Faker.values())], <span class="hljs-string">"广东"</span>)
    .set_global_opts(
        title_opts=opts.TitleOpts(title=<span class="hljs-string">"Map-广东地图"</span>), visualmap_opts=opts.VisualMapOpts()
    )
   
)

c2 = (
    Map()
    .add(<span class="hljs-string">"商家A"</span>, [list(z) <span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> zip(Faker.provinces, Faker.values())], <span class="hljs-string">"china"</span>)
    .set_global_opts(
        title_opts=opts.TitleOpts(title=<span class="hljs-string">"Map-VisualMap（连续型）"</span>),
        visualmap_opts=opts.VisualMapOpts(max_=<span class="hljs-number">200</span>),
    )
)

<span class="hljs-comment"># c1.render_notebook()</span>
c2.render_notebook()
</div></code></pre>
<p><img src="img/md-2021-03-30-11-05-33.png" alt="">
<img src="img/md-2021-03-30-11-05-53.png" alt=""></p>
<h2 id="6%E7%89%B9%E8%89%B2%E5%9B%BE%E8%A1%A8%E4%BD%BF%E7%94%A8">6.特色图表使用</h2>
<p>在学习pyecharts时，看到一些比较有意思的（动态展示）组件，如随着时间动态展示图表数据的变化。这里做下介绍</p>
<ul>
<li>
<p>Timeline：时间线轮播多图
先声明一个<code>Timeline</code>, 按照展示的时间顺序，将图表add到<code>Timeline</code>上; 可以通过播放按钮循环按照时间顺序展示图表。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Pie, Timeline
<span class="hljs-keyword">from</span> pyecharts.faker <span class="hljs-keyword">import</span> Faker

attr = Faker.choose()
tl = Timeline()
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">2015</span>, <span class="hljs-number">2020</span>):
    pie = (
        Pie()
        .add(
            <span class="hljs-string">"商家A"</span>,
            [list(z) <span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> zip(attr, Faker.values())],
            rosetype=<span class="hljs-string">"radius"</span>,
            radius=[<span class="hljs-string">"30%"</span>, <span class="hljs-string">"55%"</span>],
        )
        .set_global_opts(title_opts=opts.TitleOpts(<span class="hljs-string">"某商店{}年营业额"</span>.format(i)))
    )
    tl.add(pie, <span class="hljs-string">"{}年"</span>.format(i))
tl.render_notebook()
</div></code></pre>
<p><img src="img/md-2021-03-30-11-19-09.png" alt=""></p>
</li>
<li>
<p>仪表盘</p>
<pre class="hljs"><code><div><span class="hljs-keyword">from</span> pyecharts <span class="hljs-keyword">import</span> options <span class="hljs-keyword">as</span> opts
<span class="hljs-keyword">from</span> pyecharts.charts <span class="hljs-keyword">import</span> Gauge

c = (
    Gauge()
    .add(<span class="hljs-string">""</span>, [(<span class="hljs-string">"完成率"</span>, <span class="hljs-number">30.6</span>)], radius=<span class="hljs-string">"70%"</span>,
        axisline_opts=opts.AxisLineOpts(
            linestyle_opts=opts.LineStyleOpts(
                color=[(<span class="hljs-number">0.3</span>, <span class="hljs-string">"#67e0e3"</span>), (<span class="hljs-number">0.7</span>, <span class="hljs-string">"#37a2da"</span>), (<span class="hljs-number">1</span>, <span class="hljs-string">"#fd666d"</span>)], width=<span class="hljs-number">30</span>)
            ),
            title_label_opts=opts.LabelOpts(
                font_size=<span class="hljs-number">20</span>, color=<span class="hljs-string">"blue"</span>, font_family=<span class="hljs-string">"Microsoft YaHei"</span>
            ),
        )
    .set_global_opts(title_opts=opts.TitleOpts(title=<span class="hljs-string">"Gauge-基本示例"</span>), legend_opts=opts.LegendOpts(is_show=<span class="hljs-literal">False</span>),)

)
c.render_notebook()
</div></code></pre>
<p><img src="img/md-2021-03-30-11-33-25.png" alt=""></p>
</li>
</ul>
<h2 id="7%E5%85%B6%E4%BB%96%E5%9B%BE%E8%A1%A8%E4%B8%80%E8%A7%88">7.其他图表一览</h2>
<p>从上面的实例看，已经展示地图，条形图，折线图，饼图，仪表盘。这里展示下pyecharts提供的更多的图表，</p>
<ul>
<li>雷达图 Radar</li>
</ul>
<p><img src="img/md-2021-03-30-12-09-40.png" alt=""></p>
<ul>
<li>树形图 Tree</li>
</ul>
<p><img src="img/md-2021-03-30-12-10-13.png" alt=""></p>
<ul>
<li>热力图 heatMap</li>
</ul>
<p><img src="img/md-2021-03-30-12-10-34.png" alt=""></p>
<ul>
<li>日历图 Calendar</li>
</ul>
<p><img src="img/md-2021-03-30-12-10-49.png" alt=""></p>
<ul>
<li>散点图 Scatter</li>
</ul>
<p><img src="img/md-2021-03-30-12-11-44.png" alt=""></p>
<ul>
<li>3D图 Bar3D</li>
</ul>
<p><img src="img/md-2021-03-30-12-12-03.png" alt=""></p>
<ul>
<li>箱型图 Boxplot</li>
</ul>
<p><img src="img/md-2021-03-30-12-13-41.png" alt=""></p>
<h2 id="8%E6%80%BB%E7%BB%93">8.总结</h2>
<p>本文介绍的基于echarts的python动态图表展示组件pyecharts，除了提供众多常用的图表外，最重要的是支持动态操作数据。总结如下：</p>
<ul>
<li>pyecharts所有的图像属性设置都通过opts来设置，有图表初始属性/全局属性/系列属性</li>
<li>本文提供常用的配置，足够用了，拿走不谢，见<code>常用配置使用</code></li>
<li>pyecharts 支持多图表组合，如折线图和条形图 overlap， 多个图表grid展示</li>
<li>pyecharts好用的map，可以展示中国省市，世界各国地图，请按照[位置，value]准备数据</li>
<li>Timeline可以让你的图表按照时间轮播</li>
<li>更多图表参见<code>参考资料</code></li>
</ul>
<h2 id="9%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">9.参考资料</h2>
<ul>
<li>https://pyecharts.org/#/zh-cn/quickstart</li>
</ul>

</body>
</html>
